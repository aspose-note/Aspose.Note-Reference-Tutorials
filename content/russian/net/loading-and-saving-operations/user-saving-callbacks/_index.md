---
title: Обратные вызовы, сохраняющие пользователя в Aspose.Note
linktitle: Обратные вызовы, сохраняющие пользователя в Aspose.Note
second_title: Aspose.Note .NET API
description: Узнайте, как реализовать обратные вызовы с сохранением пользователей в Aspose.Note для .NET, чтобы настроить сохранение шрифтов, CSS и изображений.
type: docs
weight: 31
url: /ru/net/loading-and-saving-operations/user-saving-callbacks/
---
## Введение

В этом руководстве мы рассмотрим, как реализовать обратные вызовы с сохранением пользователей в Aspose.Note для .NET. Эти обратные вызовы позволяют вам настроить процесс сохранения, предоставляя перехватчики для вмешательства на разных этапах, таких как сохранение шрифтов, таблиц стилей CSS и изображений. Используя эти обратные вызовы, вы можете адаптировать поведение сохранения в соответствии с вашими конкретными требованиями, повышая гибкость и контроль над выводом.

## Предварительные условия

Прежде чем углубляться в реализацию обратных вызовов с сохранением пользователей в Aspose.Note, убедитесь, что у вас есть следующие предварительные условия:

1.  Aspose.Note for .NET SDK: Загрузите и установите Aspose.Note for .NET SDK с сайта[страница загрузки](https://releases.aspose.com/note/net/).
   
2. Среда разработки: настройте подходящую среду разработки, например Visual Studio или любую другую среду разработки .NET.

## Импортировать пространства имен

Для начала обязательно импортируйте в свой проект необходимые пространства имен для доступа к необходимым классам и методам из библиотеки Aspose.Note:

```csharp
using Aspose.Note.Saving.Html;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
```

Теперь давайте разобьем реализацию обратных вызовов, сохраняющих пользователя, на несколько этапов:

## Шаг 1. Определите свойства обратного вызова

```csharp
public string RootFolder { get; set; }
public bool KeepCssStreamOpened { get; set; }
public string CssFolder { get; set; }
public Stream CssStream { get; private set; }
public string FontsFolder { get; set; }
public string ImagesFolder { get; set; }
```

Здесь мы определяем различные свойства, чтобы указать корневую папку, папку CSS, папку шрифтов, папку изображений и другие соответствующие настройки.

## Шаг 2. Реализация обратного вызова сохранения шрифта

```csharp
public void FontSaving(FontSavingArgs args)
{
    string uri;
    Stream stream;
    this.CreateResourceInFolder(this.FontsFolder, args.FileName, out uri, out stream);
    args.Stream = stream;
    args.Uri = Path.Combine("..", uri).Replace("\\", "\\\\");
}
```

 На этом этапе мы реализуем`FontSaving` метод обратного вызова для обработки сохранения шрифтов. Он создает ресурс в указанной папке шрифтов и соответствующим образом назначает поток и URI.

## Шаг 3. Реализуйте обратный вызов с сохранением CSS

```csharp
public void CssSaving(CssSavingArgs args)
{
    string uri;
    Stream stream;
    this.CreateResourceInFolder(this.CssFolder, args.FileName, out uri, out stream);
    args.Stream = this.CssStream = stream;
    args.KeepStreamOpen = this.KeepCssStreamOpened;
    args.Uri = uri;
}
```

 Здесь мы определяем`CssSaving`метод обратного вызова для управления сохранением таблиц стилей CSS. Он создает ресурс в указанной папке CSS и соответствующим образом устанавливает поток, URI и другие свойства.

## Шаг 4. Реализуйте обратный вызов для сохранения изображения

```csharp
public void ImageSaving(ImageSavingArgs args)
{
    string uri;
    Stream stream;
    this.CreateResourceInFolder(this.ImagesFolder, args.FileName, out uri, out stream);
    args.Stream = stream;
    args.Uri = uri;
}
```

 Наконец, мы реализуем`ImageSaving` метод обратного вызова для обработки сохранения изображений. Как и в предыдущих шагах, он создает ресурс в указанной папке изображений и назначает поток и URI.

## Заключение

В этом руководстве мы узнали, как реализовать обратные вызовы с сохранением пользователей в Aspose.Note для .NET. Следуя предоставленным инструкциям, вы можете настроить процесс сохранения шрифтов, таблиц стилей CSS и изображений, обеспечивая большую гибкость и контроль над выводом.

## Часто задаваемые вопросы

### Вопрос 1. Могу ли я использовать эти обратные вызовы для настройки других аспектов процесса сохранения?

О1: Да, вы можете расширить эти обратные вызовы или реализовать дополнительные, чтобы настроить различные аспекты процесса сохранения в соответствии с вашими потребностями.

### Вопрос 2. Совместим ли Aspose.Note для .NET с другими платформами .NET?

О2: Да, Aspose.Note для .NET совместим с различными платформами .NET, включая .NET Core и .NET Standard.

### Вопрос 3. Как обрабатывать ошибки или исключения во время процесса сохранения?

A3: Вы можете включить механизмы обработки ошибок в каждый метод обратного вызова, чтобы корректно обрабатывать любые ошибки или исключения, которые могут возникнуть.

### Вопрос 4. Есть ли какие-либо соображения по поводу производительности при использовании этих обратных вызовов?

Ответ 4. Хотя эти обратные вызовы обеспечивают гибкость, убедитесь, что они реализованы эффективно, чтобы избежать каких-либо потерь производительности, особенно при работе с большими документами или ресурсами.

### Вопрос 5. Могу ли я динамически изменять режим сохранения в зависимости от действий пользователя или других условий?

О5: Да, вы можете включить условную логику в методы обратного вызова, чтобы динамически регулировать поведение сохранения в зависимости от различных факторов.